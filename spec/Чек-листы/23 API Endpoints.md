# Чек-лист - «API Endpoints» №023 - Чек лист - неактуален (Удален из ТЗ)

|**ID**|**Пункт ТЗ**|**Приоритет**|**Проверяемый элемент**|**Ожидаемый результат**|**Статус**|**Примечания**|
|:-:|:-:|:-:|:---|:---|:-:|:---|
| **01** | 7.3 | Высокий | Авторизация (/api/login) | POST запрос с корректными login/password возвращает token. При неверных данных возвращает ошибку 401 | | |
| **02** | 7.3 | Высокий | Регистрация (/api/registration) | POST запрос создает нового пользователя в таблице users, создает деревню в villages, возвращает token | | Проверить валидацию логина/пароля |
| **03** | 7.3 | Высокий | Выход (/api/logout) | POST запрос с token завершает сессию, token становится невалидным | | |
| **04** | 7.3 | Высокий | Данные деревни (/api/village) | GET запрос возвращает корректные данные о деревне пользователя из таблиц villages, buildings, units | | |
| **05** | 7.3 | Высокий | Строительство зданий (/api/buildings) | POST запрос создает запись в buildings, списывает ресурсы с users.money, запускает таймер строительства | | |
| **06** | 7.3 | Высокий | Улучшение зданий (/api/buildings/upgrade) | PUT запрос обновляет level в buildings, списывает стоимость улучшения, устанавливает upgrade_end. | | |
| **07** | 7.3 | Высокий | Наем юнитов (/api/units/train) | POST запрос увеличивает count в units, списывает стоимость найма с users.money | | |
| **08** | 7.3 | Высокий | Данные карты (/api/map) | GET запрос возвращает данные из villages с координатами x,y и информацию о защите новичков | | |
| **09** | 7.3 | Высокий | Запуск атаки (/api/attack) | POST запрос создает запись в attacks, списывает стоимость похода, устанавливает start_time и arrival_time | | |
| **10** | 7.3 | Высокий | Отмена атаки (/api/attack/{id}) | DELETE запрос обновляет status атаки на 'cancelled', возвращает армию в деревню | | |
| **11** | 7.3 | Высокий | Сообщения чата (/api/messages) | GET возвращает историю сообщений, POST создает новое сообщение в таблице messages | | |
| **12** | 7.3 | Высокий | Фиксация боя (/api/battle) | POST запрос создает запись в battles, обновляет рейтинг игроков, применяет последствия боя | | |
| **13** | 7.3 | Высокий | Восстановление зданий (/api/buildings/repair) | POST запрос восстанавливает current_hp зданий после боя согласно правилам из ТЗ 5.4 | | |
| **14** | 7.3 | Высокий | Сбор дохода (/api/income) | GET запрос рассчитывает и начисляет доход от шахты на основе last_income_datetime | | |
| **15** | 7.3 | Средний | Рейтинговая таблица (/api/rating) | GET запрос возвращает топ игроков из users с сортировкой по rating | | |
| **16** | 7.3 | Средний | Уборка могилок (/api/cleanup) | POST запрос списывает 10 монет за уборку могилки согласно механике из ТЗ 5.3 | | |
